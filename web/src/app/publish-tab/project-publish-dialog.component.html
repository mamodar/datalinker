<form #publishForm='ngForm'>
  <mat-form-field>
    <mat-label>Projekt</mat-label>
    <input [(ngModel)]="data.name" matInput name="name" required></mat-form-field>
  <br>
  <mat-form-field>
    <mat-label>Beschreibung</mat-label>
    <input [(ngModel)]="data.description" matInput name="description" required></mat-form-field>
  <br>
  <mat-form-field>
    <mat-label>Verantwortlicher</mat-label>
    <input [(ngModel)]="data.email" matInput name="email" required></mat-form-field>
  <br>

  <button (click)="fileInput.click()" mat-raised-button type="button">Datei auswählen</button>
  <div class="mat-caption">(max. 50MB)</div>
  <input #fileInput (change)="uploadFile($event.target.files)" hidden id="file" required type="file"><br>
  <div *ngIf="data.file" class="mat-caption">
    Dateiname: {{data.file.name}} Größe: {{((data.file.size / 1024 / 1024) | number)}} MB
  </div>
  <div mat-dialog-actions>
    <button [mat-dialog-close]="{send: false , resource: data}" class="button" color="primary" mat-raised-button>
      Abbrechen
    </button>
    <button [disabled]="publishForm.form.invalid || !this.data.file || (data.file.size > 50*1024*1024)"
            [mat-dialog-close]="{send: true , resource: data}" class="button"
            color="warn" mat-raised-button>
      Exportieren
    </button>
  </div>
</form>
